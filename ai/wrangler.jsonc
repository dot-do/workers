/**
 * Wrangler Configuration for AI Service
 * Multi-provider AI generation microservice
 */
{
  "$schema": "node_modules/wrangler/config-schema.json",
  "name": "ai",
  "main": "worker.ts",
  "compatibility_date": "2025-07-08",
  "account_id": "b6641681fe423910342b9ffa1364c76d",
  "compatibility_flags": ["nodejs_compat"],

  // Routes
  // "routes": [
    // { "pattern": "ai.api.mw/*", "zone_name": "api.mw" },
    // { "pattern": "ai.apis.do/*", "zone_name": "apis.do" }
  // ],

  // Observability
  "observability": {
    "enabled": true
  },

  // Workers AI Binding
  "ai": {
    "binding": "AI"
  },

  // R2 Buckets (for media storage)
  "r2_buckets": [
    { "binding": "MEDIA_BUCKET", "bucket_name": "ai-media" }
  // ],

  // Service Bindings (for RPC to other services)
  "services": [
    { "binding": "DB", "service": "db" }
  // ],

  // Tail Consumers (for logging/monitoring)
  "tail_consumers": [
    { "service": "pipeline" }
  // ],

  // Queues (for async/background processing)
  "queues": {
    "producers": [
      { "binding": "AI_QUEUE", "queue": "ai-generation" }
    ],
    "consumers": [
      {
        "queue": "ai-generation",
        "max_batch_size": 10,
        "max_batch_timeout": 5,
        "max_retries": 3,
        "dead_letter_queue": "ai-generation-dlq"
      }
    ]
  },

  // Environment Variables (secrets via wrangler secret put)
  "vars": {
    "CLOUDFLARE_ACCOUNT_ID": "YOUR_ACCOUNT_ID"
  }

  // Required secrets (set via: wrangler secret put <NAME>):
  // - OPENAI_API_KEY: OpenAI API key
  // - ANTHROPIC_API_KEY: Anthropic API key (or use OPENROUTER_API_KEY)
  // - OPENROUTER_API_KEY: OpenRouter API key (alternative to Anthropic direct)
}
